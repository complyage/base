package verify

import "github.com/ralphferrara/aria/app"

//||------------------------------------------------------------------------------------------------||
//|| Expired
//||------------------------------------------------------------------------------------------------||

func (v *Verification) UpdateStatusExpired() error {
	app.Log.Info("Verification Status : Expired - ", v.UUID)
	//||------------------------------------------------------------------------------------------------||
	//|| Set Status
	//||------------------------------------------------------------------------------------------------||
	v.Status = StatusExpired
	//||------------------------------------------------------------------------------------------------||
	//|| Add Step
	//||------------------------------------------------------------------------------------------------||
	v.AddStep(app.Constants("VERIFY_STEP_TYPES").Get("STATUS_EXPD"), "")
	//||------------------------------------------------------------------------------------------------||
	//|| Save
	//||------------------------------------------------------------------------------------------------||
	v.IdentityUpdated = true
	v.EncryptedSaved = true
	v.TransactionSaved = true
	v.Finalize(false)
	v.DatabaseUpdate()
	//||------------------------------------------------------------------------------------------------||
	//|| Done
	//||------------------------------------------------------------------------------------------------||
	return nil
}
